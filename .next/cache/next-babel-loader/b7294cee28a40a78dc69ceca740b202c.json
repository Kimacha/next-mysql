{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Users/kim/Documents/Programming Resources/next-mysql/pages/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport fetch from 'isomorphic-unfetch';\nimport Link from 'netxt/link';\n\nHomePage.getInitialProps = function _callee(_ref) {\n  var req, query, protocol, host, pageRequest, res, json;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          req = _ref.req, query = _ref.query;\n          protocol = req ? \"\".concat(req.headers['x-forwarded-protocol'], \":\") : location.protocol;\n          host = req ? req.headers[x - forwarded - host] : location.host;\n          pageRequest = \"\".concat(protocol, \"//\").concat(host, \"/api/profiles?page=\").concat(query.page || 1, \"& limit=\").concat(query.limit || 9);\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(fetch(pageRequest));\n\n        case 6:\n          res = _context.sent;\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(res.json());\n\n        case 9:\n          json = _context.sent;\n          return _context.abrupt(\"return\", json);\n\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nfunction HomePage(_ref2) {\n  var profiles = _ref2.profiles,\n      page = _ref2.page,\n      pageCount = _ref2.pageCount;\n  return __jsx(React.Fragment, null, __jsx(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19\n    },\n    __self: this\n  }, profiles.map(function (p) {\n    return __jsx(\"li\", {\n      className: \"profile\",\n      key: p.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21\n      },\n      __self: this\n    }, __jsx(Link, {\n      href: \"/profile?id=\".concat(p.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23\n      },\n      __self: this\n    }, __jsx(\"img\", {\n      src: p.avatar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24\n      },\n      __self: this\n    }), __jsx(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25\n      },\n      __self: this\n    }, p.name))));\n  })), __jsx(\"nav\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, page > 1 && __jsx(Link, {\n    href: \"/?page=\".concat(page - 1, \"&limit=9\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"Prev\")), page > 1 && __jsx(Link, {\n    href: \"/?page=\".concat(page + 1, \"&limit=9\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, \"Next\"))));\n}\n\nexport default HomePage;","map":{"version":3,"sources":["/Users/kim/Documents/Programming Resources/next-mysql/pages/index.js"],"names":["fetch","Link","HomePage","getInitialProps","req","query","protocol","headers","location","host","x","forwarded","pageRequest","page","limit","res","json","profiles","pageCount","map","p","id","avatar","name"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,oBAAlB;AACA,OAAOC,IAAP,MAAiB,YAAjB;;AAEAC,QAAQ,CAACC,eAAT,GAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAQC,UAAAA,GAAR,QAAQA,GAAR,EAAaC,KAAb,QAAaA,KAAb;AACjBC,UAAAA,QADiB,GACNF,GAAG,aACfA,GAAG,CAACG,OAAJ,CAAY,sBAAZ,CADe,SAElBC,QAAQ,CAACF,QAHY;AAKjBG,UAAAA,IALiB,GAKVL,GAAG,GAAGA,GAAG,CAACG,OAAJ,CAAYG,CAAC,GAACC,SAAF,GAAYF,IAAxB,CAAH,GAAmCD,QAAQ,CAACC,IALrC;AAMjBG,UAAAA,WANiB,aAMAN,QANA,eAMaG,IANb,gCAMuCJ,KAAK,CAACQ,IAAN,IAAc,CANrD,qBAMiER,KAAK,CAACS,KAAN,IAAe,CANhF;AAAA;AAAA,2CAOLd,KAAK,CAACY,WAAD,CAPA;;AAAA;AAOjBG,UAAAA,GAPiB;AAAA;AAAA,2CAQJA,GAAG,CAACC,IAAJ,EARI;;AAAA;AAQjBA,UAAAA,IARiB;AAAA,2CAShBA,IATgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA3B;;AAYA,SAASd,QAAT,QAAgD;AAAA,MAA5Be,QAA4B,SAA5BA,QAA4B;AAAA,MAAlBJ,IAAkB,SAAlBA,IAAkB;AAAA,MAAZK,SAAY,SAAZA,SAAY;AAC5C,SACI,4BACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKD,QAAQ,CAACE,GAAT,CAAa,UAAAC,CAAC;AAAA,WACX;AAAI,MAAA,SAAS,EAAC,SAAd;AAAwB,MAAA,GAAG,EAAEA,CAAC,CAACC,EAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,MAAC,IAAD;AAAM,MAAA,IAAI,wBAAiBD,CAAC,CAACC,EAAnB,CAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,GAAG,EAAED,CAAC,CAACE,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOF,CAAC,CAACG,IAAT,CAFJ,CADJ,CADJ,CADW;AAAA,GAAd,CADL,CADA,EAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKV,IAAI,GAAG,CAAP,IACG,MAAC,IAAD;AAAM,IAAA,IAAI,mBAAYA,IAAI,GAAC,CAAjB,aAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,CAFR,EAMKA,IAAI,GAAG,CAAP,IACG,MAAC,IAAD;AAAM,IAAA,IAAI,mBAAYA,IAAI,GAAC,CAAjB,aAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,CAPR,CAbA,CADJ;AA4BH;;AAED,eAAeX,QAAf","sourcesContent":["import fetch from 'isomorphic-unfetch'\nimport Link from 'netxt/link'\n\nHomePage.getInitialProps = async ({req, query}) => {\n    const protocol = req \n    ? `${req.headers['x-forwarded-protocol']}:`\n    : location.protocol\n\n    const host = req ? req.headers[x-forwarded-host] : location.host\n    const pageRequest = `${protocol}//${host}/api/profiles?page=${query.page || 1}& limit=${query.limit || 9}`\n    const res = await fetch(pageRequest)\n    const json = await res.json()\n    return json\n}\n\nfunction HomePage ({profiles, page, pageCount}) {\n    return (\n        <>\n        <ul>\n            {profiles.map(p => (\n                <li className=\"profile\" key={p.id}>\n                    <Link href={`/profile?id=${p.id}`}>\n                        <a>\n                            <img src={p.avatar} />\n                            <span>{p.name}</span>\n                        </a>\n                    </Link>\n                </li>\n            ))}\n        </ul>\n        <nav>\n            {page > 1 && (\n                <Link href={`/?page=${page-1}&limit=9`}>\n                    <a>Prev</a>\n                </Link>\n            )}\n            {page > 1 && (\n                <Link href={`/?page=${page+1}&limit=9`}>\n                    <a>Next</a>\n                </Link>\n            )}\n        </nav>\n        </>\n    )\n}\n\nexport default HomePage"]},"metadata":{},"sourceType":"module"}